import{_ as l,r as c,o as u,c as p,b as a,w as e,e as i,a as n,d as s}from"./app.c1589156.js";const r={},k=i('<h1 id="isref-unref" tabindex="-1"><a class="header-anchor" href="#isref-unref" aria-hidden="true">#</a> isRef &amp; unRef</h1><div class="custom-container tip"><p class="custom-container-title">TIP</p><p>\u672C\u7BC7\u7B14\u8BB0\u5BF9\u5E94\u7684\u5206\u652F\u53F7\u4E3A: <code>main\u5206\u652F\uFF1A 6107262</code></p></div><p>\u8FD9\u662F\u4E24\u4E2A\u5DE5\u5177\u65B9\u6CD5\u3002</p><blockquote><ul><li><code>isRef</code> \u7528\u4E8E\u5224\u65AD\u4F20\u5165\u7684\u503C\u662F\u5426\u662F <code>ref</code> \u5BF9\u8C61;</li><li><code>unRef</code> \u7528\u4E8E\u8FD4\u56DE\u4F20\u5165 <code>ref</code> \u5BF9\u8C61\u7684 <code>value</code> \u503C\u3002\u5982\u679C\u4F20\u5165\u7684\u4E0D\u662F <code>ref</code> \u5BF9\u8C61\uFF0C\u5219\u5C06\u503C\u539F\u6837\u8FD4\u56DE\u3002</li></ul></blockquote><h2 id="isref" tabindex="-1"><a class="header-anchor" href="#isref" aria-hidden="true">#</a> isRef</h2><p>\u8001\u89C4\u77E9\uFF0C\u6211\u4EEC\u8FD8\u662F\u5148\u6765\u7F16\u5199\u5BF9\u5E94\u7684\u6D4B\u8BD5\u7528\u4F8B\uFF1A</p>',6),d=n("div",{class:"language-typescript ext-ts line-numbers-mode"},[n("pre",{class:"language-typescript"},[n("code",null,[n("span",{class:"token comment"},"// src/reactivity/__tests__/ref.spec.ts"),s(`

`),n("span",{class:"token function"},"it"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'isRef'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"{"),s(`
  `),n("span",{class:"token keyword"},"const"),s(" a "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"ref"),n("span",{class:"token punctuation"},"("),n("span",{class:"token number"},"1"),n("span",{class:"token punctuation"},")"),s(`
  `),n("span",{class:"token keyword"},"const"),s(" user "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"reactive"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),s(" age"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token number"},"10"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),s(`
  `),n("span",{class:"token function"},"expect"),n("span",{class:"token punctuation"},"("),n("span",{class:"token function"},"isRef"),n("span",{class:"token punctuation"},"("),s("a"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"toBe"),n("span",{class:"token punctuation"},"("),n("span",{class:"token boolean"},"true"),n("span",{class:"token punctuation"},")"),s(`
  `),n("span",{class:"token function"},"expect"),n("span",{class:"token punctuation"},"("),n("span",{class:"token function"},"isRef"),n("span",{class:"token punctuation"},"("),n("span",{class:"token number"},"1"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"toBe"),n("span",{class:"token punctuation"},"("),n("span",{class:"token boolean"},"false"),n("span",{class:"token punctuation"},")"),s(`
  `),n("span",{class:"token function"},"expect"),n("span",{class:"token punctuation"},"("),n("span",{class:"token function"},"isRef"),n("span",{class:"token punctuation"},"("),s("user"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"toBe"),n("span",{class:"token punctuation"},"("),n("span",{class:"token boolean"},"false"),n("span",{class:"token punctuation"},")"),s(`
`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),b=n("p",null,[s("\u90A3\u6211\u4EEC\u8981\u5982\u4F55\u5224\u65AD\u4F20\u5165\u7684\u5BF9\u8C61\u662F\u5426\u662F\u4E2A "),n("code",null,"ref"),s(" \u5BF9\u8C61\u5462\uFF1F\u6211\u4EEC\u53EF\u4EE5\u5728 "),n("code",null,"RefImpl"),s(" \u7C7B\u4E2D\u5B9A\u4E49\u4E00\u4E2A\u5C5E\u6027 "),n("code",null,"__v_isRef"),s("\uFF0C\u7528\u4E8E\u6807\u8BC6 "),n("code",null,"ref"),s(" \u5BF9\u8C61\u3002\u4E4B\u540E\u6211\u4EEC\u5BF9\u4F20\u5165\u7684\u503C\u8FDB\u884C\u5224\u65AD\uFF0C\u5982\u679C\u6709\u8FD9\u4E2A\u5C5E\u6027\uFF0C\u90A3\u4E48\u5B83\u5C31\u662F\u4E2A "),n("code",null,"ref"),s(" \u5BF9\u8C61\uFF1A")],-1),f=n("div",{class:"language-typescript ext-ts line-numbers-mode"},[n("pre",{class:"language-typescript"},[n("code",null,[n("span",{class:"token comment"},"// src/reactivity/ref.ts"),s(`

`),n("span",{class:"token keyword"},"class"),s(),n("span",{class:"token class-name"},"RefImpl"),s(),n("span",{class:"token punctuation"},"{"),s(`
  `),n("span",{class:"token keyword"},"private"),s(" _value"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token builtin"},"any"),s(`
  `),n("span",{class:"token keyword"},"private"),s(" _rawValue"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token builtin"},"any"),s(),n("span",{class:"token comment"},"// \u4FDD\u5B58\u539F\u59CB\u503C\uFF0C\u7528\u4E8E set \u9636\u6BB5\u5BF9\u6BD4\u503C\u662F\u5426\u53D1\u751F\u4E86\u53D8\u5316"),s(`
  deps`),n("span",{class:"token operator"},":"),s(" Set"),n("span",{class:"token operator"},"<"),n("span",{class:"token builtin"},"any"),n("span",{class:"token operator"},">"),s(`
  __v_isRef `),n("span",{class:"token operator"},"="),s(),n("span",{class:"token boolean"},"true"),s(`

  `),n("span",{class:"token function"},"constructor"),n("span",{class:"token punctuation"},"("),s("value"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token builtin"},"any"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token keyword"},"this"),n("span",{class:"token punctuation"},"."),s("_rawValue "),n("span",{class:"token operator"},"="),s(` value
    `),n("span",{class:"token keyword"},"this"),n("span",{class:"token punctuation"},"."),s("_value "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"convert"),n("span",{class:"token punctuation"},"("),s("value"),n("span",{class:"token punctuation"},")"),s(`
    `),n("span",{class:"token keyword"},"this"),n("span",{class:"token punctuation"},"."),s("deps "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"Set"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(`
  `),n("span",{class:"token punctuation"},"}"),s(`

  `),n("span",{class:"token keyword"},"get"),s(),n("span",{class:"token function"},"value"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token comment"},"// \u53EF\u4EE5\u8FDB\u884C track \u65F6\u624D\u8FDB\u884C\u4F9D\u8D56\u6536\u96C6"),s(`
    `),n("span",{class:"token function"},"isTracking"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"&&"),s(),n("span",{class:"token function"},"trackEffects"),n("span",{class:"token punctuation"},"("),n("span",{class:"token keyword"},"this"),n("span",{class:"token punctuation"},"."),s("deps"),n("span",{class:"token punctuation"},")"),s(`
    `),n("span",{class:"token keyword"},"return"),s(),n("span",{class:"token keyword"},"this"),n("span",{class:"token punctuation"},"."),s(`_value
  `),n("span",{class:"token punctuation"},"}"),s(`

  `),n("span",{class:"token keyword"},"set"),s(),n("span",{class:"token function"},"value"),n("span",{class:"token punctuation"},"("),s("newValue"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token builtin"},"any"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token comment"},"// \u5982\u679C\u503C\u6CA1\u6709\u53D1\u751F\u53D8\u5316\uFF0C\u4E0D\u4F1A\u89E6\u53D1 trigger"),s(`
    `),n("span",{class:"token keyword"},"if"),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token function"},"hasChanged"),n("span",{class:"token punctuation"},"("),n("span",{class:"token keyword"},"this"),n("span",{class:"token punctuation"},"."),s("_rawValue"),n("span",{class:"token punctuation"},","),s(" newValue"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
      `),n("span",{class:"token keyword"},"this"),n("span",{class:"token punctuation"},"."),s("_rawValue "),n("span",{class:"token operator"},"="),s(` newValue
      `),n("span",{class:"token keyword"},"this"),n("span",{class:"token punctuation"},"."),s("_value "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"convert"),n("span",{class:"token punctuation"},"("),s("newValue"),n("span",{class:"token punctuation"},")"),s(`
      `),n("span",{class:"token function"},"triggerEffects"),n("span",{class:"token punctuation"},"("),n("span",{class:"token keyword"},"this"),n("span",{class:"token punctuation"},"."),s("deps"),n("span",{class:"token punctuation"},")"),s(`
    `),n("span",{class:"token punctuation"},"}"),s(`
  `),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`

`),n("span",{class:"token doc-comment comment"},[s(`/**
 * \u7528\u4E8E\u5224\u65AD\u4F20\u5165\u7684\u503C\u662F\u5426\u662F ref
 * `),n("span",{class:"token keyword"},"@param"),s(),n("span",{class:"token parameter"},"ref"),s(` 
 * `),n("span",{class:"token keyword"},"@returns"),s(` 
 */`)]),s(`
`),n("span",{class:"token keyword"},"export"),s(),n("span",{class:"token keyword"},"function"),s(),n("span",{class:"token function"},"isRef"),n("span",{class:"token punctuation"},"("),s("ref"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
  `),n("span",{class:"token keyword"},"return"),s(),n("span",{class:"token operator"},"!"),n("span",{class:"token operator"},"!"),s("ref"),n("span",{class:"token punctuation"},"."),s(`__v_isRef
`),n("span",{class:"token punctuation"},"}"),s(`
`)])]),n("div",{class:"highlight-lines"},[n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("div",{class:"highlight-line"},"\xA0"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("div",{class:"highlight-line"},"\xA0"),n("div",{class:"highlight-line"},"\xA0"),n("div",{class:"highlight-line"},"\xA0")]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),m=n("h2",{id:"unref",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#unref","aria-hidden":"true"},"#"),s(" unRef")],-1),v=n("p",null,"\u8BDD\u4E0D\u591A\u8BF4\uFF0C\u4E0A\u6D4B\u8BD5\u7528\u4F8B\uFF1A",-1),_=n("div",{class:"language-typescript ext-ts line-numbers-mode"},[n("pre",{class:"language-typescript"},[n("code",null,[n("span",{class:"token comment"},"// src/reactivity/__tests__/ref.spec.ts"),s(`

`),n("span",{class:"token function"},"it"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'unRef'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"{"),s(`
  `),n("span",{class:"token keyword"},"const"),s(" a "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"ref"),n("span",{class:"token punctuation"},"("),n("span",{class:"token number"},"1"),n("span",{class:"token punctuation"},")"),s(`
  `),n("span",{class:"token function"},"expect"),n("span",{class:"token punctuation"},"("),n("span",{class:"token function"},"unRef"),n("span",{class:"token punctuation"},"("),s("a"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"toBe"),n("span",{class:"token punctuation"},"("),n("span",{class:"token number"},"1"),n("span",{class:"token punctuation"},")"),s(`
  `),n("span",{class:"token function"},"expect"),n("span",{class:"token punctuation"},"("),n("span",{class:"token function"},"unRef"),n("span",{class:"token punctuation"},"("),n("span",{class:"token number"},"1"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"toBe"),n("span",{class:"token punctuation"},"("),n("span",{class:"token number"},"1"),n("span",{class:"token punctuation"},")"),s(`
`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),h=n("p",null,[n("code",null,"unRef"),s(" \u7684\u5B9E\u73B0\u5176\u5B9E\u5F88\u7B80\u5355\uFF0C\u53EA\u8981\u5224\u65AD\u4F20\u5165\u7684\u503C\u662F\u5426\u662F "),n("code",null,"ref"),s(" \u5BF9\u8C61\u5373\u53EF\u3002\u4E0A\u9762\u6211\u4EEC\u5DF2\u7ECF\u5B9E\u73B0\u4E86 "),n("code",null,"isRef"),s("\uFF0C\u73B0\u5728\u8981\u505A\u7684\u53EA\u662F\u8FD4\u56DE\u5BF9\u5E94\u7684\u503C\u5C31\u597D\u4E86\uFF1A")],-1),y=n("div",{class:"language-typescript ext-ts line-numbers-mode"},[n("pre",{class:"language-typescript"},[n("code",null,[n("span",{class:"token comment"},"// src/reactivity/ref.ts"),s(`

`),n("span",{class:"token keyword"},"export"),s(),n("span",{class:"token keyword"},"function"),s(),n("span",{class:"token function"},"unRef"),n("span",{class:"token punctuation"},"("),s("ref"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
  `),n("span",{class:"token keyword"},"return"),s(),n("span",{class:"token function"},"isRef"),n("span",{class:"token punctuation"},"("),s("ref"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"?"),s(" ref"),n("span",{class:"token punctuation"},"."),s("value "),n("span",{class:"token operator"},":"),s(` ref
`),n("span",{class:"token punctuation"},"}"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1);function w(g,R){const t=c("CodeGroupItem"),o=c("CodeGroup");return u(),p("div",null,[k,a(o,null,{default:e(()=>[a(t,{title:"ref.spec.ts"},{default:e(()=>[d]),_:1})]),_:1}),b,a(o,null,{default:e(()=>[a(t,{title:"ref.ts"},{default:e(()=>[f]),_:1})]),_:1}),m,v,a(o,null,{default:e(()=>[a(t,{title:"ref.spec.ts"},{default:e(()=>[_]),_:1})]),_:1}),h,a(o,null,{default:e(()=>[a(t,{title:"ref.ts"},{default:e(()=>[y]),_:1})]),_:1})])}var V=l(r,[["render",w],["__file","11_isRef & unRef.html.vue"]]);export{V as default};
