import{_ as u,o as l,c as i,b as e,w as a,e as c,a as n,d as s,r as p}from"./app.ea80c8a9.js";const r={},k=c('<h1 id="proxyrefs" tabindex="-1"><a class="header-anchor" href="#proxyrefs" aria-hidden="true">#</a> proxyRefs</h1><div class="custom-container tip"><p class="custom-container-title">TIP</p><p>\u672C\u7BC7\u7B14\u8BB0\u5BF9\u5E94\u7684\u5206\u652F\u53F7\u4E3A: <code>main\u5206\u652F\uFF1A c6f5fd5</code></p></div><p>\u5199\u8FC7 Vue3 \u4EE3\u7801\u7684\u5C0F\u4F19\u4F34\u4EEC\u5E94\u8BE5\u77E5\u9053\uFF0C\u5F53\u6211\u4EEC\u5728 <code>template</code> \u4E2D\u4F7F\u7528 <code>setup</code> \u8FD4\u56DE\u7684 <code>ref</code> \u5BF9\u8C61\u7684\u503C\u65F6\uFF0C\u662F\u4E0D\u9700\u8981\u901A\u8FC7 <code>.value</code> \u7684\u65B9\u5F0F\u6765\u83B7\u53D6\u7684\u3002\u4E4B\u6240\u4EE5\u53EF\u4EE5\u8FD9\u4E48\u505A\uFF0C\u662F\u56E0\u4E3A <code>proxyRefs</code> \u5BF9 <code>ref</code> \u5BF9\u8C61\u8FDB\u884C\u4E86\u5904\u7406\u3002</p><p>\u6211\u4EEC\u5148\u901A\u8FC7\u6D4B\u8BD5\u7528\u4F8B\u6765\u770B\u770B <code>proxyRefs</code> \u90FD\u5B9E\u73B0\u4E86\u54EA\u4E9B\u529F\u80FD\uFF1A</p>',4),d=n("div",{class:"language-typescript ext-ts line-numbers-mode"},[n("pre",{class:"language-typescript"},[n("code",null,[n("span",{class:"token comment"},"// src/reactivity/__tests__/ref.spec.ts"),s(`

`),n("span",{class:"token function"},"it"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'proxyRefss'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"{"),s(`
  `),n("span",{class:"token keyword"},"const"),s(" user "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token punctuation"},"{"),s(`
    age`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token function"},"ref"),n("span",{class:"token punctuation"},"("),n("span",{class:"token number"},"10"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(`
    name`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'xiaohong'"),s(`
  `),n("span",{class:"token punctuation"},"}"),s(`
  `),n("span",{class:"token comment"},"// \u8C03\u7528 proxyUser \u540E\uFF0C\u65E0\u9700\u901A\u8FC7 .value \u7684\u65B9\u5F0F\u83B7\u53D6 ref \u7684\u503C"),s(`
  `),n("span",{class:"token keyword"},"const"),s(" proxyUser  "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"proxyRefs"),n("span",{class:"token punctuation"},"("),s("user"),n("span",{class:"token punctuation"},")"),s(`
  `),n("span",{class:"token function"},"expect"),n("span",{class:"token punctuation"},"("),s("user"),n("span",{class:"token punctuation"},"."),s("age"),n("span",{class:"token punctuation"},"."),s("value"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"toBe"),n("span",{class:"token punctuation"},"("),n("span",{class:"token number"},"10"),n("span",{class:"token punctuation"},")"),s(`
  `),n("span",{class:"token function"},"expect"),n("span",{class:"token punctuation"},"("),s("proxyUser"),n("span",{class:"token punctuation"},"."),s("age"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"toBe"),n("span",{class:"token punctuation"},"("),n("span",{class:"token number"},"10"),n("span",{class:"token punctuation"},")"),s(`
  `),n("span",{class:"token function"},"expect"),n("span",{class:"token punctuation"},"("),s("proxyUser"),n("span",{class:"token punctuation"},"."),s("name"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"toBe"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'xiaohong'"),n("span",{class:"token punctuation"},")"),s(`
  
  proxyUser`),n("span",{class:"token punctuation"},"."),s("age "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token number"},"20"),s(`
  `),n("span",{class:"token function"},"expect"),n("span",{class:"token punctuation"},"("),s("proxyUser"),n("span",{class:"token punctuation"},"."),s("age"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"toBe"),n("span",{class:"token punctuation"},"("),n("span",{class:"token number"},"20"),n("span",{class:"token punctuation"},")"),s(`
  `),n("span",{class:"token function"},"expect"),n("span",{class:"token punctuation"},"("),s("user"),n("span",{class:"token punctuation"},"."),s("age"),n("span",{class:"token punctuation"},"."),s("value"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"toBe"),n("span",{class:"token punctuation"},"("),n("span",{class:"token number"},"20"),n("span",{class:"token punctuation"},")"),s(`
  
  proxyUser`),n("span",{class:"token punctuation"},"."),s("age "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"ref"),n("span",{class:"token punctuation"},"("),n("span",{class:"token number"},"10"),n("span",{class:"token punctuation"},")"),s(`
  `),n("span",{class:"token function"},"expect"),n("span",{class:"token punctuation"},"("),s("proxyUser"),n("span",{class:"token punctuation"},"."),s("age"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"toBe"),n("span",{class:"token punctuation"},"("),n("span",{class:"token number"},"10"),n("span",{class:"token punctuation"},")"),s(`
  `),n("span",{class:"token function"},"expect"),n("span",{class:"token punctuation"},"("),s("user"),n("span",{class:"token punctuation"},"."),s("age"),n("span",{class:"token punctuation"},"."),s("value"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"toBe"),n("span",{class:"token punctuation"},"("),n("span",{class:"token number"},"10"),n("span",{class:"token punctuation"},")"),s(` 
`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),m=c("<p>\u901A\u8FC7\u6D4B\u8BD5\u7528\u4F8B\u6211\u4EEC\u53EF\u4EE5\u5F97\u77E5\uFF1A</p><blockquote><ol><li>\u5F53\u8C03\u7528\u4E86 <code>proxyRefs</code> \u65B9\u6CD5\u540E\uFF0C\u53EF\u4EE5\u4E0D\u901A\u8FC7 <code>.value</code> \u7684\u65B9\u5F0F\u83B7\u53D6 <code>ref</code> \u5BF9\u8C61\u4E0A\u7684\u503C\uFF1B</li><li>\u5F53\u7ED9 <code>proxyRefs</code> \u65B9\u6CD5\u8FD4\u56DE\u503C\u4E2D\u7684 <code>ref</code> \u5BF9\u8C61\u8D4B\u503C\u65F6\uFF0C\u5982\u679C\u662F\u4E2A\u57FA\u672C\u7C7B\u578B\uFF0C \u5219\u4FEE\u6539 <code>ref</code> \u5BF9\u8C61\u4E0A\u7684 value \u503C\uFF0C\u800C\u5982\u679C\u6240\u8D4B\u7684\u503C\u662F\u4E2A <code>ref</code> \u5BF9\u8C61\uFF0C\u5219\u76F4\u63A5\u8986\u76D6\u3002</li></ol></blockquote><p>\u6211\u4EEC\u5148\u6765\u5B9E\u73B0\u7B2C\u4E00\u4E2A\u529F\u80FD\u3002\u901A\u8FC7\u65B9\u6CD5\u540D\u79F0\u6211\u4EEC\u53EF\u4EE5\u77E5\u9053\uFF0C<code>proxyRefs</code> \u8FD4\u56DE\u7684\u662F <code>proxy</code> \u5BF9\u8C61\u3002\u7B2C\u4E00\u4E2A\u529F\u80FD\u6BD4\u8F83\u7B80\u5355\uFF0C\u65E2\u7136\u8C03\u7528\u5B83\u4E4B\u540E\u4E0D\u7528\u4F7F\u7528 <code>.value</code> \u7684\u65B9\u5F0F\u6765\u83B7\u53D6 <code>ref</code> \u4E0A\u7684\u503C\uFF0C\u90A3\u4E48\u6211\u4EEC\u76F4\u63A5\u5C06 <code>.value</code> \u7684\u503C\u8FD4\u56DE\u5373\u53EF\u3002\u800C\u9488\u5BF9\u975E <code>ref</code> \u5BF9\u8C61\uFF0C\u53EA\u9700\u8981\u5C06\u5176\u539F\u6837\u8FD4\u56DE\u3002\u8FD9\u4E2A\u529F\u80FD\u770B\u7740\u662F\u4E0D\u662F\u6709\u70B9\u773C\u719F\uFF1F\u5176\u5B9E\u5C31\u662F\u4E0A\u4E00\u8282\u6211\u4EEC\u5B9E\u73B0\u7684 <code>unRef</code>\uFF0C\u8FD9\u91CC\u6211\u4EEC\u76F4\u63A5\u4F7F\u7528\u5C31\u884C\uFF1A</p>",3),f=n("div",{class:"language-typescript ext-ts line-numbers-mode"},[n("pre",{class:"language-typescript"},[n("code",null,[n("span",{class:"token comment"},"// src/reactivity/ref.ts"),s(`

`),n("span",{class:"token doc-comment comment"},[s(`/**
 * template \u4E2D\u8C03\u7528\u6B64\u65B9\u6CD5\uFF0C\u76EE\u7684\u662F\u5728\u9875\u9762\u4E2D\u65E0\u9700\u901A\u8FC7 .value \u7684\u65B9\u5F0F\u83B7\u53D6 ref \u7684\u503C
 * `),n("span",{class:"token keyword"},"@param"),s(),n("span",{class:"token parameter"},"objectWithRefs"),s(` 
 * `),n("span",{class:"token keyword"},"@returns"),s(` 
 */`)]),s(`
`),n("span",{class:"token keyword"},"export"),s(),n("span",{class:"token keyword"},"function"),s(),n("span",{class:"token function"},"proxyRefs"),n("span",{class:"token punctuation"},"("),s("objectWithRefs"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
  `),n("span",{class:"token keyword"},"return"),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"Proxy"),n("span",{class:"token punctuation"},"("),s("objectWithRefs"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token function"},"get"),n("span",{class:"token punctuation"},"("),s("target"),n("span",{class:"token punctuation"},","),s(" key"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
      `),n("span",{class:"token keyword"},"return"),s(),n("span",{class:"token function"},"unRef"),n("span",{class:"token punctuation"},"("),s("Reflect"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"get"),n("span",{class:"token punctuation"},"("),s("target"),n("span",{class:"token punctuation"},","),s(" key"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),s(`
    `),n("span",{class:"token punctuation"},"}"),s(`
  `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),v=c("<p>\u63A5\u4E0B\u6765\u6211\u4EEC\u4E00\u8D77\u5B9E\u73B0\u4E0B\u7B2C\u4E8C\u4E2A\u529F\u80FD\u3002\u7B2C\u4E8C\u4E2A\u529F\u80FD\u62C6\u5206\u4E0B\u6765\u5176\u5B9E\u5C31\u662F\u4EE5\u4E0B\u51E0\u79CD\u60C5\u51B5\uFF1A</p><blockquote><ol><li>\u5F53\u7ED9\u539F\u5148\u662F <code>ref</code> \u5BF9\u8C61\u7684\u5C5E\u6027\u8BBE\u7F6E <strong>\u975E <code>ref</code> \u5BF9\u8C61</strong> \u7684\u503C\u65F6\uFF0C\u9700\u8981\u4FEE\u6539\u5176 <code>.value</code> \u7684\u503C\uFF1B</li><li>\u5F53\u7ED9\u539F\u5148\u662F <code>ref</code> \u5BF9\u8C61\u7684\u5C5E\u6027\u8BBE\u7F6E <strong><code>ref</code> \u5BF9\u8C61</strong> \u7684\u503C\u65F6\uFF0C\u76F4\u63A5\u8986\u76D6\uFF1B</li><li>\u5F53\u7ED9\u539F\u5148\u4E0D\u662F <code>ref</code> \u5BF9\u8C61\u7684\u5C5E\u6027\u8BBE\u7F6E <strong>\u975E <code>ref</code> \u5BF9\u8C61</strong> \u7684\u503C\u65F6\uFF0C\u76F4\u63A5\u8986\u76D6\uFF1B</li><li>\u5F53\u7ED9\u539F\u5148\u4E0D\u662F <code>ref</code> \u5BF9\u8C61\u7684\u5C5E\u6027\u8BBE\u7F6E <strong><code>ref</code> \u5BF9\u8C61</strong> \u7684\u503C\u65F6\uFF0C\u76F4\u63A5\u8986\u76D6\uFF1B</li></ol></blockquote><p>\u56E0\u6B64\uFF0C\u6211\u4EEC\u53EA\u9700\u8981\u5BF9\u5F53\u524D\u4FEE\u6539\u7684\u5C5E\u6027\u503C\u7C7B\u578B\u4EE5\u53CA\u4F20\u5165\u7684\u503C\u7C7B\u578B\u8FDB\u884C\u5224\u65AD\u5373\u53EF\uFF0C<strong>\u5F53\u7ED9\u539F\u5148\u662F <code>ref</code> \u5BF9\u8C61\u7684\u5C5E\u6027\u8BBE\u7F6E\u975E <code>ref</code> \u5BF9\u8C61\u7684\u503C\u65F6\uFF0C\u9700\u8981\u4FEE\u6539\u5176 <code>.value</code> \u7684\u503C\uFF0C \u5426\u5219\u76F4\u63A5\u8FDB\u884C\u8986\u76D6\u3002</strong> \u7531\u6B64\u6211\u4EEC\u53EF\u4EE5\u5BF9 <code>set</code> \u7684\u903B\u8F91\u8FDB\u884C\u8865\u5145\uFF0C\u8FD9\u91CC\u5BF9 <code>ref</code> \u5BF9\u8C61\u7684\u5224\u65AD\u53EF\u4EE5\u4F7F\u7528\u6211\u4EEC\u4E0A\u4E00\u8282\u5B9E\u73B0\u7684 <code>isRef</code> \u65B9\u6CD5\uFF1A</p>",3),b=n("div",{class:"language-typescript ext-ts line-numbers-mode"},[n("pre",{class:"language-typescript"},[n("code",null,[n("span",{class:"token comment"},"// src/reactivity/ref.ts"),s(`

`),n("span",{class:"token doc-comment comment"},[s(`/**
 * template \u4E2D\u8C03\u7528\u6B64\u65B9\u6CD5\uFF0C\u76EE\u7684\u662F\u5728\u9875\u9762\u4E2D\u65E0\u9700\u901A\u8FC7 .value \u7684\u65B9\u5F0F\u83B7\u53D6 ref \u7684\u503C
 * `),n("span",{class:"token keyword"},"@param"),s(),n("span",{class:"token parameter"},"objectWithRefs"),s(` 
 * `),n("span",{class:"token keyword"},"@returns"),s(` 
 */`)]),s(`
`),n("span",{class:"token keyword"},"export"),s(),n("span",{class:"token keyword"},"function"),s(),n("span",{class:"token function"},"proxyRefs"),n("span",{class:"token punctuation"},"("),s("objectWithRefs"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
  `),n("span",{class:"token keyword"},"return"),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"Proxy"),n("span",{class:"token punctuation"},"("),s("objectWithRefs"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token function"},"get"),n("span",{class:"token punctuation"},"("),s("target"),n("span",{class:"token punctuation"},","),s(" key"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
      `),n("span",{class:"token keyword"},"return"),s(),n("span",{class:"token function"},"unRef"),n("span",{class:"token punctuation"},"("),s("Reflect"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"get"),n("span",{class:"token punctuation"},"("),s("target"),n("span",{class:"token punctuation"},","),s(" key"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),s(`
    `),n("span",{class:"token punctuation"},"}"),s(`

    `),n("span",{class:"token function"},"set"),n("span",{class:"token punctuation"},"("),s("target"),n("span",{class:"token punctuation"},","),s(" key"),n("span",{class:"token punctuation"},","),s(" value"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
      `),n("span",{class:"token keyword"},"if"),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token function"},"isRef"),n("span",{class:"token punctuation"},"("),s("target"),n("span",{class:"token punctuation"},"["),s("key"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"&&"),s(),n("span",{class:"token operator"},"!"),n("span",{class:"token function"},"isRef"),n("span",{class:"token punctuation"},"("),s("value"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
        `),n("span",{class:"token keyword"},"return"),s(" target"),n("span",{class:"token punctuation"},"["),s("key"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},"."),s("value "),n("span",{class:"token operator"},"="),s(` value
      `),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token keyword"},"else"),s(),n("span",{class:"token punctuation"},"{"),s(`
        `),n("span",{class:"token keyword"},"return"),s(" Reflect"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"set"),n("span",{class:"token punctuation"},"("),s("target"),n("span",{class:"token punctuation"},","),s(" key"),n("span",{class:"token punctuation"},","),s(" value"),n("span",{class:"token punctuation"},")"),s(`
      `),n("span",{class:"token punctuation"},"}"),s(`
    `),n("span",{class:"token punctuation"},"}"),s(`
  `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),y=n("p",null,[s("\u81F3\u6B64\uFF0C"),n("code",null,"proxyRefs"),s(" \u529F\u80FD\u5C31\u5B9E\u73B0\u5B8C\u6210\u5566~")],-1);function g(x,_){const t=p("CodeGroupItem"),o=p("CodeGroup");return l(),i("div",null,[k,e(o,null,{default:a(()=>[e(t,{title:"ref.spec.ts"},{default:a(()=>[d]),_:1})]),_:1}),m,e(o,null,{default:a(()=>[e(t,{title:"ref.ts"},{default:a(()=>[f]),_:1})]),_:1}),v,e(o,null,{default:a(()=>[e(t,{title:"ref.ts"},{default:a(()=>[b]),_:1})]),_:1}),y])}var R=u(r,[["render",g],["__file","12_proxyRefs.html.vue"]]);export{R as default};
