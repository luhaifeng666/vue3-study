import{_ as i,r as l,o as p,c as u,b as a,w as e,e as o,a as n,d as s}from"./app.2e7f876d.js";const r={},d=o('<h1 id="isreactive-isreadonly" tabindex="-1"><a class="header-anchor" href="#isreactive-isreadonly" aria-hidden="true">#</a> isReactive &amp; isReadOnly</h1><div class="custom-container tip"><p class="custom-container-title">TIP</p><p>\u672C\u7BC7\u7B14\u8BB0\u5BF9\u5E94\u7684\u5206\u652F\u53F7\u4E3A: <code>main\u5206\u652F\uFF1Aabec34d</code></p></div><p>\u5230\u76EE\u524D\u4E3A\u6B62\uFF0C\u6211\u4EEC\u5DF2\u7ECF\u521D\u6B65\u5B9E\u73B0\u4E86 <code>reactive</code> \u4EE5\u53CA <code>readonly</code> \u7684\u57FA\u672C\u529F\u80FD\u3002\u73B0\u5728\uFF0C\u6211\u4EEC\u9700\u8981\u6DFB\u52A0\u4E24\u4E2A\u65B9\u6CD5\u7528\u4E8E\u5224\u65AD\u67D0\u4E2A\u5BF9\u8C61\u662F\u5426\u662F <code>reactive</code> \u5BF9\u8C61\u6216\u8005 <code>readonly</code> \u5BF9\u8C61\u3002</p><h2 id="\u5B9E\u73B0-isreactive" tabindex="-1"><a class="header-anchor" href="#\u5B9E\u73B0-isreactive" aria-hidden="true">#</a> \u5B9E\u73B0 isReactive</h2><p>\u5728\u5B9E\u73B0\u4E4B\u524D\uFF0C\u6211\u4EEC\u5148\u6765\u8865\u5145\u4E0B <code>reactive</code> \u7684\u6D4B\u8BD5\u7528\u4F8B\uFF1A</p>',5),k=n("div",{class:"language-typescript ext-ts line-numbers-mode"},[n("pre",{class:"language-typescript"},[n("code",null,[n("span",{class:"token comment"},"// src/reactivity/__tests__/reactive.spec.ts"),s(`

`),n("span",{class:"token keyword"},"import"),s(),n("span",{class:"token punctuation"},"{"),s(" reactive"),n("span",{class:"token punctuation"},","),s(" isReactive "),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token keyword"},"from"),s(),n("span",{class:"token string"},"'../reactive'"),s(`

`),n("span",{class:"token function"},"describe"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'reactive'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"{"),s(`
  `),n("span",{class:"token function"},"it"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'happy path'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token keyword"},"const"),s(" origin "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token punctuation"},"{"),s(" num"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token number"},"0"),s(),n("span",{class:"token punctuation"},"}"),s(`
    `),n("span",{class:"token comment"},"// \u901A\u8FC7 reactive \u521B\u5EFA\u54CD\u5E94\u5F0F\u5BF9\u8C61"),s(`
    `),n("span",{class:"token keyword"},"const"),s(" reactiveData "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"reactive"),n("span",{class:"token punctuation"},"("),s("origin"),n("span",{class:"token punctuation"},")"),s(`
    `),n("span",{class:"token comment"},"// \u5224\u65AD\u54CD\u5E94\u5F0F\u5BF9\u8C61\u4E0E\u539F\u5BF9\u8C61\u4E0D\u662F\u540C\u4E00\u4E2A\u5BF9\u8C61"),s(`
    `),n("span",{class:"token function"},"expect"),n("span",{class:"token punctuation"},"("),s("reactiveData"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"."),s("not"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"toBe"),n("span",{class:"token punctuation"},"("),s("origin"),n("span",{class:"token punctuation"},")"),s(`
    `),n("span",{class:"token comment"},"// \u4EE3\u7406\u5BF9\u8C61\u4E2D\u7684 num \u503C\u5E94\u4E0E\u539F\u5BF9\u8C61\u4E2D\u7684\u76F8\u540C"),s(`
    `),n("span",{class:"token function"},"expect"),n("span",{class:"token punctuation"},"("),s("reactiveData"),n("span",{class:"token punctuation"},"."),s("num"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"toBe"),n("span",{class:"token punctuation"},"("),n("span",{class:"token number"},"0"),n("span",{class:"token punctuation"},")"),s(`
    `),n("span",{class:"token comment"},"// \u5224\u65AD\u662F\u5426\u662F reactive \u5BF9\u8C61"),s(`
    `),n("span",{class:"token function"},"expect"),n("span",{class:"token punctuation"},"("),n("span",{class:"token function"},"isReactive"),n("span",{class:"token punctuation"},"("),s("origin"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"toBe"),n("span",{class:"token punctuation"},"("),n("span",{class:"token boolean"},"false"),n("span",{class:"token punctuation"},")"),s(`
    `),n("span",{class:"token function"},"expect"),n("span",{class:"token punctuation"},"("),n("span",{class:"token function"},"isReactive"),n("span",{class:"token punctuation"},"("),s("reactiveData"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"toBe"),n("span",{class:"token punctuation"},"("),n("span",{class:"token boolean"},"true"),n("span",{class:"token punctuation"},")"),s(`
  `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),s(`
`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),s(`
`)])]),n("div",{class:"highlight-lines"},[n("br"),n("br"),n("div",{class:"highlight-line"},"\xA0"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("div",{class:"highlight-line"},"\xA0"),n("div",{class:"highlight-line"},"\xA0"),n("br"),n("br")]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),v=o("<p>\u6839\u636E\u6D4B\u8BD5\u7528\u4F8B\uFF0C<code>isReactive</code> \u65B9\u6CD5\u63A5\u53D7\u4E00\u4E2A\u5BF9\u8C61\u4F5C\u4E3A\u5165\u53C2\uFF0C\u8FD4\u56DE\u503C\u4E3A\u5E03\u5C14\u503C\uFF0C\u7528\u4E8E\u5224\u65AD\u4F20\u5165\u7684\u5BF9\u8C61\u662F\u5426\u662F <code>reactive</code> \u5BF9\u8C61\u3002\u90A3\u6211\u4EEC\u901A\u8FC7\u4EC0\u4E48\u53EF\u4EE5\u5224\u65AD\u5F53\u524D\u5BF9\u8C61\u662F\u5426\u662F <code>reactive</code> \u5BF9\u8C61\u5462\uFF1F</p><p>\u8BD5\u60F3\u4E00\u4E0B\uFF0C\u5982\u679C\u4F20\u5165 <code>isReactive</code> \u7684\u662F <code>reactive</code> \u5BF9\u8C61\uFF0C\u90A3\u4E48\u5B83\u5FC5\u7136\u662F\u4E2A <code>Proxy</code> \u5BF9\u8C61\u3002\u8FD8\u8BB0\u5F97\u5728\u4E0A\u4E00\u7BC7 <code>readonly</code> \u529F\u80FD\u7684\u5B9E\u73B0\u4E2D\uFF0C\u6211\u4EEC\u7ED9 <code>createGetter</code> \u65B9\u6CD5\u4F20\u5165\u4E86\u4E00\u4E2A <code>isReadonly</code> \u6807\u8BB0\uFF0C\u7528\u4E8E\u5224\u65AD\u662F\u5426\u662F <code>readonly</code> \u5BF9\u8C61\u4E48\u3002<strong>\u5982\u679C\u5F53\u524D\u5BF9\u8C61\u662F\u4E2A <code>Proxy</code> \u5BF9\u8C61\uFF0C\u5E76\u4E14 <code>isReadonly === false</code></strong>\uFF0C \u90A3\u4E48\u4E0D\u5C31\u8BF4\u660E\u5F53\u524D\u5BF9\u8C61\u662F\u4E2A <code>reactive</code> \u5BF9\u8C61\u4E86\u4E48\uFF01</p><p>\u987A\u7740\u8FD9\u4E2A\u601D\u8DEF\uFF0C\u8981\u60F3\u89E6\u53D1 <code>get</code> \u65B9\u6CD5\uFF0C\u6211\u4EEC\u53EF\u4EE5\u5B9A\u4E49\u4E00\u4E2A\u9759\u6001\u6807\u8BB0 <code>__v_isReactive</code> \u7528\u4E8E\u5224\u65AD\u662F\u5426\u662F <code>reactive</code> \u5BF9\u8C61\u3002\u5F53\u6211\u4EEC\u5C1D\u8BD5\u83B7\u53D6\u4F20\u5165\u5BF9\u8C61\u7684 <code>__v_isReactive</code> \u5C5E\u6027\u65F6\uFF0C\u5C31\u4F1A\u89E6\u53D1 <code>get</code> \u65B9\u6CD5\uFF0C\u6B64\u65F6\uFF0C\u6211\u4EEC\u53EA\u8981\u8FD4\u56DE <code>!isReadOnly</code> \u5373\u53EF\uFF1A</p>",3),b=n("div",{class:"language-typescript ext-ts line-numbers-mode"},[n("pre",{class:"language-typescript"},[n("code",null,[n("span",{class:"token comment"},"// src/reactivity/reactive.ts"),s(`

`),n("span",{class:"token keyword"},"export"),s(),n("span",{class:"token keyword"},"const"),s(),n("span",{class:"token keyword"},"enum"),s(" ReactiveFlags "),n("span",{class:"token punctuation"},"{"),s(`
  `),n("span",{class:"token constant"},"IS_REACTIVE"),s(),n("span",{class:"token operator"},"="),s(),n("span",{class:"token string"},"'__v_isReactive'"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`

`),n("span",{class:"token comment"},"// \u5224\u65AD\u662F\u5426\u662F reactive \u5BF9\u8C61"),s(`
`),n("span",{class:"token keyword"},"export"),s(),n("span",{class:"token keyword"},"const"),s(),n("span",{class:"token function-variable function"},"isReactive"),s(),n("span",{class:"token operator"},"="),s(" value "),n("span",{class:"token operator"},"=>"),s(" value"),n("span",{class:"token punctuation"},"["),s("ReactiveFlags"),n("span",{class:"token punctuation"},"."),n("span",{class:"token constant"},"IS_REACTIVE"),n("span",{class:"token punctuation"},"]"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),m=n("div",{class:"language-typescript ext-ts line-numbers-mode"},[n("pre",{class:"language-typescript"},[n("code",null,[n("span",{class:"token comment"},"// src/reactivity/baseHandlers.ts"),s(`

`),n("span",{class:"token keyword"},"import"),s(),n("span",{class:"token punctuation"},"{"),s(" ReactiveFlags "),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token keyword"},"from"),s(),n("span",{class:"token string"},"'./reactive'"),s(`

`),n("span",{class:"token doc-comment comment"},[s(`/**
 * \u7528\u4E8E\u751F\u6210 get \u65B9\u6CD5
 * `),n("span",{class:"token keyword"},"@param"),s(),n("span",{class:"token parameter"},"isReadonly"),s(` \u662F\u5426\u662F readonly \u5BF9\u8C61
 * `),n("span",{class:"token keyword"},"@returns"),s(` 
 */`)]),s(`
`),n("span",{class:"token keyword"},"function"),s(),n("span",{class:"token function"},"createGetter"),n("span",{class:"token punctuation"},"("),s("isReadonly "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token boolean"},"false"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
  `),n("span",{class:"token keyword"},"return"),s(),n("span",{class:"token keyword"},"function"),n("span",{class:"token punctuation"},"("),s("target"),n("span",{class:"token punctuation"},","),s(" key"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token comment"},"// \u5224\u65AD\u662F\u5426\u662F reactive \u5BF9\u8C61"),s(`
    `),n("span",{class:"token keyword"},"if"),s(),n("span",{class:"token punctuation"},"("),s("key "),n("span",{class:"token operator"},"==="),s(" ReactiveFlags"),n("span",{class:"token punctuation"},"."),n("span",{class:"token constant"},"IS_REACTIVE"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
      `),n("span",{class:"token keyword"},"return"),s(),n("span",{class:"token operator"},"!"),s(`isReadonly
    `),n("span",{class:"token punctuation"},"}"),s(`
    `),n("span",{class:"token keyword"},"const"),s(" res "),n("span",{class:"token operator"},"="),s(" Reflect"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"get"),n("span",{class:"token punctuation"},"("),s("target"),n("span",{class:"token punctuation"},","),s(" key"),n("span",{class:"token punctuation"},")"),s(`
    `),n("span",{class:"token comment"},"// \u6536\u96C6\u4F9D\u8D56"),s(`
    `),n("span",{class:"token operator"},"!"),s("isReadonly "),n("span",{class:"token operator"},"&&"),s(),n("span",{class:"token function"},"track"),n("span",{class:"token punctuation"},"("),s("target"),n("span",{class:"token punctuation"},","),s(" key"),n("span",{class:"token punctuation"},")"),s(`
    `),n("span",{class:"token keyword"},"return"),s(` res
  `),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`
`)])]),n("div",{class:"highlight-lines"},[n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("div",{class:"highlight-line"},"\xA0"),n("div",{class:"highlight-line"},"\xA0"),n("div",{class:"highlight-line"},"\xA0"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br")]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),y=o('<p>\u73B0\u5728\uFF0C\u6211\u4EEC\u56DE\u8FC7\u5934\u6765\u770B\u4E0B\u6D4B\u8BD5\u7528\u4F8B\u7684\u8FD0\u884C\u7ED3\u679C\uFF0C\u5F53\u6211\u4EEC\u4F20\u5165\u7684\u5BF9\u8C61\u4E3A\u666E\u901A\u5BF9\u8C61\u65F6\uFF0C\u6D4B\u8BD5\u7528\u4F8B\u62A5\u9519\uFF0C\u539F\u56E0\u5982\u4E0B\uFF1A</p><p><img src="https://user-images.githubusercontent.com/9375823/175804230-c6534c26-1e43-449e-bdd6-0e7f12574d9d.png" alt="isReactive"></p><p>\u9884\u671F\u8FD4\u56DE\u7ED3\u679C\u662F <code>false</code>\uFF0C\u7ED3\u679C\u8FD4\u56DE\u7684\u5374\u662F <code>undefined</code>\u3002\u8FD9\u662F\u4E3A\u4EC0\u4E48\u5462\uFF1F</p><p>\u90A3\u662F\u56E0\u4E3A\u666E\u901A\u5BF9\u8C61\u5E76\u4E0D\u662F <code>Proxy</code> \u5BF9\u8C61\uFF0C\u76F4\u63A5\u8BBF\u95EE <code>__v_isReactive</code> \u5C5E\u6027\u65F6\uFF0C\u5E76\u4E0D\u4F1A\u89E6\u53D1 <code>get</code> \u65B9\u6CD5\uFF0C\u800C\u666E\u901A\u5BF9\u8C61\u4E0A\u53C8\u4E0D\u5B58\u5728 <code>__v_isReactive</code> \u6807\u8BB0\uFF0C\u56E0\u6B64\u6D4B\u8BD5\u7528\u4F8B\u4E0D\u4F1A\u901A\u8FC7\u3002\u800C\u5B9E\u9645\u4E0A\u666E\u901A\u5BF9\u8C61\u4E5F\u7684\u786E\u4E0D\u662F <code>reactive</code> \u5BF9\u8C61\uFF0C\u56E0\u6B64\uFF0C\u6211\u4EEC\u9700\u8981\u5BF9 <code>isReactive</code> \u65B9\u6CD5\u8FDB\u884C\u6539\u9020\uFF0C\u76F4\u63A5\u8FD4\u56DE <code>!!value[ReactiveFlags.IS_REACTIVE]</code> \u5373\u53EF\uFF1A</p>',4),g=n("div",{class:"language-typescript ext-ts line-numbers-mode"},[n("pre",{class:"language-typescript"},[n("code",null,[n("span",{class:"token keyword"},"export"),s(),n("span",{class:"token keyword"},"const"),s(),n("span",{class:"token function-variable function"},"isReactive"),s(),n("span",{class:"token operator"},"="),s(" value "),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token operator"},"!"),n("span",{class:"token operator"},"!"),s("value"),n("span",{class:"token punctuation"},"["),s("ReactiveFlags"),n("span",{class:"token punctuation"},"."),n("span",{class:"token constant"},"IS_REACTIVE"),n("span",{class:"token punctuation"},"]"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"})])],-1),_=n("h2",{id:"\u5B9E\u73B0-isreadonly",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#\u5B9E\u73B0-isreadonly","aria-hidden":"true"},"#"),s(" \u5B9E\u73B0 isReadOnly")],-1),h=n("p",null,[n("code",null,"isReadOnly"),s(" \u7684\u5224\u65AD\u65B9\u5F0F\u4E0E "),n("code",null,"isReactive"),s(" \u6709\u5F02\u66F2\u540C\u5DE5\u4E4B\u5999\uFF0C\u7686\u662F\u901A\u8FC7 "),n("code",null,"isReadOnly"),s(" \u6765\u8FDB\u884C\u5224\u65AD\u7684\uFF0C\u53EA\u4E0D\u8FC7\u4E0D\u7528\u53D6\u53CD\u7F62\u4E86\u3002")],-1),f=n("p",null,[s("\u6211\u4EEC\u5148\u6765\u8865\u5145\u4E0B "),n("code",null,"isReadonly"),s(" \u7684\u6D4B\u8BD5\u7528\u4F8B\uFF1A")],-1),R=n("div",{class:"language-typescript ext-ts line-numbers-mode"},[n("pre",{class:"language-typescript"},[n("code",null,[n("span",{class:"token comment"},"// src/reactivity/__tests__/readonly.spec.ts"),s(`

`),n("span",{class:"token function"},"it"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'happy path'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token keyword"},"const"),s(" original "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token punctuation"},"{"),s(" foo"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token number"},"1"),n("span",{class:"token punctuation"},","),s(" bar"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"{"),s(" bar"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token number"},"2"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},"}"),s(`
    `),n("span",{class:"token keyword"},"const"),s(" wrapped "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"readonly"),n("span",{class:"token punctuation"},"("),s("original"),n("span",{class:"token punctuation"},")"),s(`
    `),n("span",{class:"token function"},"expect"),n("span",{class:"token punctuation"},"("),s("wrapped"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"."),s("not"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"toBe"),n("span",{class:"token punctuation"},"("),s("original"),n("span",{class:"token punctuation"},")"),s(`
    `),n("span",{class:"token function"},"expect"),n("span",{class:"token punctuation"},"("),s("wrapped"),n("span",{class:"token punctuation"},"."),s("foo"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"toBe"),n("span",{class:"token punctuation"},"("),n("span",{class:"token number"},"1"),n("span",{class:"token punctuation"},")"),s(`
    `),n("span",{class:"token comment"},"// \u5224\u65AD\u662F\u5426\u662F readonly \u5BF9\u8C61"),s(`
    `),n("span",{class:"token function"},"expect"),n("span",{class:"token punctuation"},"("),n("span",{class:"token function"},"isReadonly"),n("span",{class:"token punctuation"},"("),s("original"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"toBe"),n("span",{class:"token punctuation"},"("),n("span",{class:"token boolean"},"false"),n("span",{class:"token punctuation"},")"),s(`
    `),n("span",{class:"token function"},"expect"),n("span",{class:"token punctuation"},"("),n("span",{class:"token function"},"isReadonly"),n("span",{class:"token punctuation"},"("),s("wrapped"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"toBe"),n("span",{class:"token punctuation"},"("),n("span",{class:"token boolean"},"true"),n("span",{class:"token punctuation"},")"),s(`
  `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),s(`
`)])]),n("div",{class:"highlight-lines"},[n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("div",{class:"highlight-line"},"\xA0"),n("div",{class:"highlight-line"},"\xA0"),n("br")]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),w=n("p",null,[s("\u56E0\u6B64\uFF0C\u6211\u4EEC\u53EF\u4EE5\u53C2\u7167 "),n("code",null,"isReactive"),s(" \u7684\u5B9E\u73B0\u65B9\u5F0F\uFF0C\u5B9A\u4E49\u4E00\u4E2A\u540D\u4E3A "),n("code",null,"__v_isReadonly"),s(" \u7684\u9759\u6001\u6807\u8BB0\uFF0C\u5E76\u5728 "),n("code",null,"get"),s(" \u65B9\u6CD5\u4E2D\u8FDB\u884C\u5224\u65AD\u5373\u53EF\uFF1A")],-1),x=n("div",{class:"language-typescript ext-ts line-numbers-mode"},[n("pre",{class:"language-typescript"},[n("code",null,[n("span",{class:"token comment"},"// src/reactivity/reactive.ts"),s(`

`),n("span",{class:"token keyword"},"export"),s(),n("span",{class:"token keyword"},"const"),s(),n("span",{class:"token keyword"},"enum"),s(" ReactiveFlags "),n("span",{class:"token punctuation"},"{"),s(`
  `),n("span",{class:"token constant"},"IS_REACTIVE"),s(),n("span",{class:"token operator"},"="),s(),n("span",{class:"token string"},"'__v_isReactive'"),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token constant"},"IS_READONLY"),s(),n("span",{class:"token operator"},"="),s(),n("span",{class:"token string"},"'__v_isReadonly'"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`

`),n("span",{class:"token comment"},"// \u5224\u65AD\u662F\u5426\u662F reactive \u5BF9\u8C61"),s(`
`),n("span",{class:"token keyword"},"export"),s(),n("span",{class:"token keyword"},"const"),s(),n("span",{class:"token function-variable function"},"isReadonly"),s(),n("span",{class:"token operator"},"="),s(" value "),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token operator"},"!"),n("span",{class:"token operator"},"!"),s("value"),n("span",{class:"token punctuation"},"["),s("ReactiveFlags"),n("span",{class:"token punctuation"},"."),n("span",{class:"token constant"},"IS_READONLY"),n("span",{class:"token punctuation"},"]"),s(`

`),n("span",{class:"token comment"},"// \u5224\u65AD\u662F\u5426\u662F readonly \u5BF9\u8C61"),s(`
`),n("span",{class:"token keyword"},"export"),s(),n("span",{class:"token keyword"},"const"),s(),n("span",{class:"token function-variable function"},"isReadonly"),s(),n("span",{class:"token operator"},"="),s(" value "),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token operator"},"!"),n("span",{class:"token operator"},"!"),s("value"),n("span",{class:"token punctuation"},"["),s("ReactiveFlags"),n("span",{class:"token punctuation"},"."),n("span",{class:"token constant"},"IS_READONLY"),n("span",{class:"token punctuation"},"]"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),I=n("div",{class:"language-typescript ext-ts line-numbers-mode"},[n("pre",{class:"language-typescript"},[n("code",null,[n("span",{class:"token comment"},"// src/reactivity/baseHandlers.ts"),s(`

`),n("span",{class:"token keyword"},"import"),s(),n("span",{class:"token punctuation"},"{"),s(" ReactiveFlags "),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token keyword"},"from"),s(),n("span",{class:"token string"},"'./reactive'"),s(`

`),n("span",{class:"token doc-comment comment"},[s(`/**
 * \u7528\u4E8E\u751F\u6210 get \u65B9\u6CD5
 * `),n("span",{class:"token keyword"},"@param"),s(),n("span",{class:"token parameter"},"isReadonly"),s(` \u662F\u5426\u662F readonly \u5BF9\u8C61
 * `),n("span",{class:"token keyword"},"@returns"),s(` 
 */`)]),s(`
`),n("span",{class:"token keyword"},"function"),s(),n("span",{class:"token function"},"createGetter"),n("span",{class:"token punctuation"},"("),s("isReadonly "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token boolean"},"false"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
  `),n("span",{class:"token keyword"},"return"),s(),n("span",{class:"token keyword"},"function"),n("span",{class:"token punctuation"},"("),s("target"),n("span",{class:"token punctuation"},","),s(" key"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token comment"},"// \u5224\u65AD\u662F\u5426\u662F reactive \u5BF9\u8C61"),s(`
    `),n("span",{class:"token keyword"},"if"),s(),n("span",{class:"token punctuation"},"("),s("key "),n("span",{class:"token operator"},"==="),s(" ReactiveFlags"),n("span",{class:"token punctuation"},"."),n("span",{class:"token constant"},"IS_REACTIVE"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
      `),n("span",{class:"token keyword"},"return"),s(),n("span",{class:"token operator"},"!"),s(`isReadonly
    `),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token keyword"},"else"),s(),n("span",{class:"token keyword"},"if"),s(),n("span",{class:"token punctuation"},"("),s("key "),n("span",{class:"token operator"},"==="),s(" ReactiveFlags"),n("span",{class:"token punctuation"},"."),n("span",{class:"token constant"},"IS_READONLY"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
      `),n("span",{class:"token comment"},"// \u5224\u65AD\u662F\u5426\u662F readonly \u5BF9\u8C61"),s(`
      `),n("span",{class:"token keyword"},"return"),s(` isReadonly
    `),n("span",{class:"token punctuation"},"}"),s(`
    `),n("span",{class:"token keyword"},"const"),s(" res "),n("span",{class:"token operator"},"="),s(" Reflect"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"get"),n("span",{class:"token punctuation"},"("),s("target"),n("span",{class:"token punctuation"},","),s(" key"),n("span",{class:"token punctuation"},")"),s(`
    `),n("span",{class:"token comment"},"// \u6536\u96C6\u4F9D\u8D56"),s(`
    `),n("span",{class:"token operator"},"!"),s("isReadonly "),n("span",{class:"token operator"},"&&"),s(),n("span",{class:"token function"},"track"),n("span",{class:"token punctuation"},"("),s("target"),n("span",{class:"token punctuation"},","),s(" key"),n("span",{class:"token punctuation"},")"),s(`
    `),n("span",{class:"token keyword"},"return"),s(` res
  `),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`
`)])]),n("div",{class:"highlight-lines"},[n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("div",{class:"highlight-line"},"\xA0"),n("div",{class:"highlight-line"},"\xA0"),n("div",{class:"highlight-line"},"\xA0"),n("div",{class:"highlight-line"},"\xA0"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br")]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),E=n("p",null,[s("\u81F3\u6B64\uFF0C\u6211\u4EEC\u5C31\u5B9E\u73B0\u4E86 "),n("code",null,"isReactive"),s(" \u4EE5\u53CA "),n("code",null,"isReadOnly"),s(" \u529F\u80FD\u3002")],-1);function C(F,O){const t=l("CodeGroupItem"),c=l("CodeGroup");return p(),u("div",null,[d,a(c,null,{default:e(()=>[a(t,{title:"reactive.spec.ts"},{default:e(()=>[k]),_:1})]),_:1}),v,a(c,null,{default:e(()=>[a(t,{title:"reactive.ts"},{default:e(()=>[b]),_:1}),a(t,{title:"baseHandlers.ts"},{default:e(()=>[m]),_:1})]),_:1}),y,a(c,null,{default:e(()=>[a(t,{title:"reactive.ts"},{default:e(()=>[g]),_:1})]),_:1}),_,h,f,a(c,null,{default:e(()=>[a(t,{title:"readonly.spec.ts"},{default:e(()=>[R]),_:1})]),_:1}),w,a(c,null,{default:e(()=>[a(t,{title:"reactive.ts"},{default:e(()=>[x]),_:1}),a(t,{title:"baseHandlers.ts"},{default:e(()=>[I]),_:1})]),_:1}),E])}var A=i(r,[["render",C],["__file","06_reactiveOrReadonly.html.vue"]]);export{A as default};
