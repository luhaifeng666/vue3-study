import{_ as i,r as o,o as p,c as u,a as n,b as t,w as e,d as s,e as r}from"./app.dd83afde.js";const k={},d=n("h1",{id:"effect-reactive-\u4F9D\u8D56\u6536\u96C6-\u89E6\u53D1\u4F9D\u8D56",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#effect-reactive-\u4F9D\u8D56\u6536\u96C6-\u89E6\u53D1\u4F9D\u8D56","aria-hidden":"true"},"#"),s(" effect & reactive & \u4F9D\u8D56\u6536\u96C6 & \u89E6\u53D1\u4F9D\u8D56")],-1),m=n("div",{class:"custom-container tip"},[n("p",{class:"custom-container-title"},"TIP"),n("p",null,[s("\u672C\u7BC7\u7B14\u8BB0\u5BF9\u5E94\u7684\u5206\u652F\u53F7\u4E3A: "),n("code",null,"main\u5206\u652F\uFF1Ae8bb112")])],-1),b=s("\u5728 Vue3 \u4E2D\uFF0C"),v={href:"https://v3.cn.vuejs.org/api/basic-reactivity.html#reactive",target:"_blank",rel:"noopener noreferrer"},_=s("reactive"),f=s(" \u65B9\u6CD5\u88AB\u7528\u4E8E\u521B\u5EFA\u4E00\u4E2A\u5BF9\u8C61\u7684 "),h=n("strong",null,"\u54CD\u5E94\u5F0F\u526F\u672C",-1),g=s("\u3002\u8FD9\u91CC\u53EF\u4EE5\u62C6\u6210\u4E24\u4E2A\u90E8\u5206\u6765\u7406\u89E3\uFF0C\u5373 "),y=n("strong",null,"\u54CD\u5E94\u5F0F",-1),x=s(" \u4EE5\u53CA "),w=n("strong",null,"\u526F\u672C",-1),B=s("\u3002"),C=n("h3",{id:"\u526F\u672C",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#\u526F\u672C","aria-hidden":"true"},"#"),s(" \u526F\u672C")],-1),T=n("p",null,[s("\u6211\u4EEC\u5148\u6765\u770B\u770B "),n("strong",null,"\u526F\u672C"),s(" \u8FD9\u4E2A\u90E8\u5206\u3002\u5728\u5B9E\u73B0 "),n("code",null,"reactive"),s(" \u65B9\u6CD5\u4E4B\u524D\uFF0C\u6211\u4EEC\u5148\u6765\u5199\u4E0B\u5B83\u7684\u6D4B\u8BD5\u7528\u4F8B\uFF0C\u770B\u770B\u5B83\u9700\u8981\u505A\u4E9B\u5565\uFF1A")],-1),G=n("div",{class:"language-typescript ext-ts line-numbers-mode"},[n("pre",{class:"language-typescript"},[n("code",null,[n("span",{class:"token comment"},"// src/reactivity/__tests__/reactive.spec.ts"),s(`

`),n("span",{class:"token keyword"},"import"),s(),n("span",{class:"token punctuation"},"{"),s(" reactive "),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token keyword"},"from"),s(),n("span",{class:"token string"},"'../reactive'"),s(`

`),n("span",{class:"token function"},"describe"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'reactive'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"{"),s(`
  `),n("span",{class:"token function"},"it"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'happy path'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token keyword"},"const"),s(" origin "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token punctuation"},"{"),s(" num"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token number"},"0"),s(),n("span",{class:"token punctuation"},"}"),s(`
    `),n("span",{class:"token comment"},"// \u901A\u8FC7 reactive \u521B\u5EFA\u54CD\u5E94\u5F0F\u5BF9\u8C61"),s(`
    `),n("span",{class:"token keyword"},"const"),s(" reactiveData "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"reactive"),n("span",{class:"token punctuation"},"("),s("origin"),n("span",{class:"token punctuation"},")"),s(`
    `),n("span",{class:"token comment"},"// \u5224\u65AD\u54CD\u5E94\u5F0F\u5BF9\u8C61\u4E0E\u539F\u5BF9\u8C61\u4E0D\u662F\u540C\u4E00\u4E2A\u5BF9\u8C61"),s(`
    `),n("span",{class:"token function"},"expect"),n("span",{class:"token punctuation"},"("),s("reactiveData"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"."),s("not"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"toBe"),n("span",{class:"token punctuation"},"("),s("origin"),n("span",{class:"token punctuation"},")"),s(`
    `),n("span",{class:"token comment"},"// \u4EE3\u7406\u5BF9\u8C61\u4E2D\u7684 num \u503C\u5E94\u4E0E\u539F\u5BF9\u8C61\u4E2D\u7684\u76F8\u540C"),s(`
    `),n("span",{class:"token function"},"expect"),n("span",{class:"token punctuation"},"("),s("reactiveData"),n("span",{class:"token punctuation"},"."),s("num"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"toBe"),n("span",{class:"token punctuation"},"("),n("span",{class:"token number"},"0"),n("span",{class:"token punctuation"},")"),s(`
  `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),s(`
`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),I=s("\u901A\u8FC7\u6D4B\u8BD5\u7528\u4F8B\u6211\u4EEC\u4E0D\u96BE\u53D1\u73B0\uFF0C\u5176\u5B9E "),N=n("code",null,"reactive",-1),V=s(" \u505A\u7684\u4E8B\u60C5\u5F88\u7B80\u5355\uFF0C\u5C31\u662F\u521B\u5EFA\u4E00\u4E2A\u5BF9\u8C61\u526F\u672C\uFF0C\u90A3\u8FD9\u4E2A "),q=n("strong",null,"\u526F\u672C",-1),A=s(" \u8BE5\u600E\u4E48\u521B\u5EFA\u5462\uFF1F\u7B54\u6848\u662F\u4F7F\u7528 "),P={href:"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Proxy",target:"_blank",rel:"noopener noreferrer"},D=s("Proxy"),E=s(" \u{1F447}"),R=n("div",{class:"language-typescript ext-ts line-numbers-mode"},[n("pre",{class:"language-typescript"},[n("code",null,[n("span",{class:"token comment"},"// src/reactivity/reactive.ts"),s(`

`),n("span",{class:"token keyword"},"export"),s(),n("span",{class:"token keyword"},"const"),s(),n("span",{class:"token function-variable function"},"reactive"),s(),n("span",{class:"token operator"},"="),s(),n("span",{class:"token punctuation"},"("),s("raw"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"{"),s(`
  `),n("span",{class:"token keyword"},"return"),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"Proxy"),n("span",{class:"token punctuation"},"("),s("raw"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token comment"},"// \u53D6\u503C"),s(`
    `),n("span",{class:"token function"},"get"),n("span",{class:"token punctuation"},"("),s("target"),n("span",{class:"token punctuation"},","),s(" key"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
      `),n("span",{class:"token keyword"},"const"),s(" res "),n("span",{class:"token operator"},"="),s(" Reflect"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"get"),n("span",{class:"token punctuation"},"("),s("target"),n("span",{class:"token punctuation"},","),s(" key"),n("span",{class:"token punctuation"},")"),s(`
      `),n("span",{class:"token keyword"},"return"),s(` res
    `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token comment"},"// \u8D4B\u503C"),s(`
    `),n("span",{class:"token function"},"set"),n("span",{class:"token punctuation"},"("),s("target"),n("span",{class:"token punctuation"},","),s(" key"),n("span",{class:"token punctuation"},","),s(" value"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
      `),n("span",{class:"token keyword"},"const"),s(" res "),n("span",{class:"token operator"},"="),s(" Reflect"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"set"),n("span",{class:"token punctuation"},"("),s("target"),n("span",{class:"token punctuation"},","),s(" key"),n("span",{class:"token punctuation"},","),s(" value"),n("span",{class:"token punctuation"},")"),s(`
      `),n("span",{class:"token keyword"},"return"),s(` res
    `),n("span",{class:"token punctuation"},"}"),s(`
  `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),j=r('<h3 id="\u54CD\u5E94\u5F0F" tabindex="-1"><a class="header-anchor" href="#\u54CD\u5E94\u5F0F" aria-hidden="true">#</a> \u54CD\u5E94\u5F0F</h3><p>\u73B0\u5728\u6211\u4EEC\u5DF2\u7ECF\u53EF\u4EE5\u901A\u8FC7 <code>reactive</code> \u65B9\u6CD5\u83B7\u53D6\u76EE\u6807\u5BF9\u8C61\u7684 <strong>\u526F\u672C</strong> \u4E86\uFF0C\u90A3 <strong>\u54CD\u5E94\u5F0F</strong> \u90E8\u5206\u53C8\u8BE5\u5982\u4F55\u5B9E\u73B0\u5462\uFF1F</p><p>\u6240\u8C13 <strong>\u54CD\u5E94\u5F0F</strong>\uFF0C \u5176\u5B9E\u672C\u8D28\u4E0A\u5C31\u505A\u4E86\u4E24\u4EF6\u4E8B\u60C5\uFF1A</p><blockquote><ol><li>\u5728\u8BFB\u53D6\u5BF9\u8C61\u5C5E\u6027\u65F6\u8FDB\u884C <code>\u4F9D\u8D56\u6536\u96C6</code></li><li>\u5728\u4FEE\u6539\u5BF9\u8C61\u5C5E\u6027\u65F6\u6267\u884C <code>\u4F9D\u8D56\u89E6\u53D1</code></li></ol></blockquote><p>\u800C\u8FD9\u90E8\u5206\u7684\u903B\u8F91\u5219\u4EA4\u7531 <code>effect</code> \u6A21\u5757\u6765\u5B9E\u73B0\u3002\u90A3 <code>\u4F9D\u8D56\u6536\u96C6</code> \u8DDF <code>\u4F9D\u8D56\u89E6\u53D1</code> \u5177\u4F53\u662F\u600E\u6837\u7684\u4E00\u4E2A\u6D41\u7A0B\u5462\uFF1F\u8BF7\u770B\u4E0B\u56FE\uFF1A</p><p><img src="https://user-images.githubusercontent.com/9375823/173803951-43576337-7bba-423d-a985-5c0eb9dfb052.png" alt="track&amp;trigger"></p><p>\u5BF9\u4E0A\u56FE\u7684\u5185\u5BB9\u7B80\u5355\u63CF\u8FF0\u5982\u4E0B\uFF1A</p><blockquote><ol><li>\u5728\u8BFB\u53D6\u54CD\u5E94\u5F0F\u5BF9\u8C61 <code>Target</code> \u4E2D\u7684\u5C5E\u6027\u65F6\uFF0C\u4F1A\u89E6\u53D1 <code>get</code> \u65B9\u6CD5\uFF0C\u5E76\u5728\u6B64\u65F6\u8FDB\u884C <code>\u4F9D\u8D56\u6536\u96C6</code> \u64CD\u4F5C\uFF0C\u6240\u6709\u7684\u4F9D\u8D56\u4F1A\u88AB\u6536\u96C6\u5230\u4F9D\u8D56\u6C60 <code>TargetMap</code> \u4E2D\uFF1B</li><li>\u5728\u8BBE\u7F6E\u54CD\u5E94\u5F0F\u5BF9\u8C61 <code>Target</code> \u7684\u5C5E\u6027\u503C\u65F6\uFF0C\u4F1A\u89E6\u53D1 <code>set</code> \u65B9\u6CD5\uFF0C\u5E76\u5728\u6B64\u65F6\u6267\u884C <code>\u4F9D\u8D56\u89E6\u53D1</code> \u64CD\u4F5C\uFF0C\u4F1A\u6839\u636E\u5BF9\u5E94\u7684 <code>Target</code> \u4EE5\u53CA <code>key</code> \u5C06\u4F9D\u8D56\u4ECE\u4F9D\u8D56\u6C60 <code>TargetMap</code> \u4E2D\u53D6\u51FA\u5E76\u6267\u884C\u3002</li></ol></blockquote><p>\u73B0\u5728\u6211\u4EEC\u5DF2\u7ECF\u77E5\u9053\u4E86 <code>effect</code> \u6A21\u5757\u6240\u8981\u5B9E\u73B0\u7684\u529F\u80FD\uFF0C\u4F9D\u636E\u4E0A\u8FF0\u5185\u5BB9\uFF0C\u5148\u6765\u7F16\u5199\u4E0B\u6D4B\u8BD5\u7528\u4F8B\uFF1A</p>',9),z=n("div",{class:"language-typescript ext-ts line-numbers-mode"},[n("pre",{class:"language-typescript"},[n("code",null,[n("span",{class:"token comment"},"// src/reactivity/__test__/effect.spec.ts"),s(`

`),n("span",{class:"token keyword"},"import"),s(),n("span",{class:"token punctuation"},"{"),s(" reactive "),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token keyword"},"from"),s(),n("span",{class:"token string"},"'../reactive'"),s(`
`),n("span",{class:"token keyword"},"import"),s(),n("span",{class:"token punctuation"},"{"),s(" effect "),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token keyword"},"from"),s(),n("span",{class:"token string"},"'../effect'"),s(`

`),n("span",{class:"token function"},"describe"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'effect'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"{"),s(`
  `),n("span",{class:"token function"},"it"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'happy path'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token comment"},"// \u521B\u5EFA\u54CD\u5E94\u5F0F\u5BF9\u8C61"),s(`
    `),n("span",{class:"token keyword"},"const"),s(" user "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"reactive"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),s(`
      age`),n("span",{class:"token operator"},":"),s(),n("span",{class:"token number"},"10"),s(`
    `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),s(`
    `),n("span",{class:"token keyword"},"let"),s(` nextAge
    `),n("span",{class:"token function"},"effect"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"{"),s(`
      nextAge `),n("span",{class:"token operator"},"="),s(" user"),n("span",{class:"token punctuation"},"."),s("age "),n("span",{class:"token operator"},"+"),s(),n("span",{class:"token number"},"1"),s(`
    `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),s(`
    `),n("span",{class:"token comment"},"// \u4F20\u5165 effect \u7684\u65B9\u6CD5\u4F1A\u88AB\u7ACB\u5373\u6267\u884C\u4E00\u6B21"),s(`
    `),n("span",{class:"token function"},"expect"),n("span",{class:"token punctuation"},"("),s("nextAge"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"toBe"),n("span",{class:"token punctuation"},"("),n("span",{class:"token number"},"11"),n("span",{class:"token punctuation"},")"),s(`
    `),n("span",{class:"token comment"},"// \u4FEE\u6539\u54CD\u5E94\u5F0F\u5BF9\u8C61\u7684\u5C5E\u6027\u503C"),s(`
    user`),n("span",{class:"token punctuation"},"."),s("age"),n("span",{class:"token operator"},"++"),s(`
    `),n("span",{class:"token comment"},"// \u4F20\u5165 effect \u7684\u65B9\u6CD5\u4F1A\u518D\u6B21\u88AB\u6267\u884C"),s(`
    `),n("span",{class:"token function"},"expect"),n("span",{class:"token punctuation"},"("),s("nextAge"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"toBe"),n("span",{class:"token punctuation"},"("),n("span",{class:"token number"},"12"),n("span",{class:"token punctuation"},")"),s(`
  `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),s(`
`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),s(`
`)])]),n("div",{class:"highlight-lines"},[n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("div",{class:"highlight-line"},"\xA0"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br")]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),L=n("div",{class:"custom-container warning"},[n("p",{class:"custom-container-title"},"\u7B2C15\u884C\u4EE3\u7801"),n("p",null,[s("\u8FD9\u91CC\u9700\u8981\u6CE8\u610F\u7684\u662F\uFF0C\u4F20\u5165 "),n("code",null,"effect"),s(" \u4E2D\u7684\u65B9\u6CD5\u4F1A\u88AB\u7ACB\u5373\u6267\u884C\u4E00\u6B21\u3002")])],-1);function M(S,J){const l=o("ExternalLinkIcon"),a=o("CodeGroupItem"),c=o("CodeGroup");return p(),u("div",null,[d,m,n("p",null,[b,n("a",v,[_,t(l)]),f,h,g,y,x,w,B]),C,T,t(c,null,{default:e(()=>[t(a,{title:"reactive.spec.ts"},{default:e(()=>[G]),_:1})]),_:1}),n("p",null,[I,N,V,q,A,n("a",P,[D,t(l)]),E]),t(c,null,{default:e(()=>[t(a,{title:"reactive.ts"},{default:e(()=>[R]),_:1})]),_:1}),j,t(c,null,{default:e(()=>[t(a,{title:"effect.spec.ts"},{default:e(()=>[z]),_:1})]),_:1}),L])}var W=i(k,[["render",M],["__file","reactive.html.vue"]]);export{W as default};
