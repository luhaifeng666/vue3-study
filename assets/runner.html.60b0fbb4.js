import{_ as u,r as l,o as i,c as p,b as s,w as a,e as o,a as n,d as e}from"./app.8c944e7d.js";const r={},d=o('<h1 id="runner" tabindex="-1"><a class="header-anchor" href="#runner" aria-hidden="true">#</a> runner</h1><div class="custom-container tip"><p class="custom-container-title">TIP</p><p>\u672C\u7BC7\u7B14\u8BB0\u5BF9\u5E94\u7684\u5206\u652F\u53F7\u4E3A: <code>main\u5206\u652F\uFF1A8fcd786</code></p></div><p>\u5728\u52A8\u624B\u5B9E\u73B0\u4E4B\u524D\uFF0C\u6211\u4EEC\u9700\u8981\u5148\u5F04\u6E05\u695A\u4E24\u4E2A\u95EE\u9898\uFF1A<code>runner</code> \u662F\u4EC0\u4E48 \u4EE5\u53CA <code>runner</code> \u5B9E\u73B0\u4E86\u4EC0\u4E48\u529F\u80FD\u3002</p><h2 id="runner-\u662F\u4EC0\u4E48-\u{1F914}" tabindex="-1"><a class="header-anchor" href="#runner-\u662F\u4EC0\u4E48-\u{1F914}" aria-hidden="true">#</a> <code>runner</code> \u662F\u4EC0\u4E48 \u{1F914}</h2><p>\u8FD8\u8BB0\u5F97\u4E0A\u4E00\u8282\u5728\u5B9E\u73B0 <code>\u4F9D\u8D56\u6536\u96C6</code> \u4EE5\u53CA <code>\u4F9D\u8D56\u89E6\u53D1</code> \u65F6\u7684 <code>effect</code> \u65B9\u6CD5\u4E48?</p><blockquote><p><strong><code>runner</code> \u5C31\u662F <code>effect</code> \u7684\u8FD4\u56DE\u7684\u4E00\u4E2A <code>\u51FD\u6570</code></strong>\u3002</p></blockquote><h2 id="runner-\u5B9E\u73B0\u4E86\u4EC0\u4E48\u529F\u80FD-\u{1F914}" tabindex="-1"><a class="header-anchor" href="#runner-\u5B9E\u73B0\u4E86\u4EC0\u4E48\u529F\u80FD-\u{1F914}" aria-hidden="true">#</a> <code>runner</code> \u5B9E\u73B0\u4E86\u4EC0\u4E48\u529F\u80FD \u{1F914}</h2><p><code>runner</code> \u4E3B\u8981\u505A\u4E86\u4E24\u4EF6\u4E8B\u60C5\uFF1A</p><blockquote><ol><li>\u6267\u884C <code>runner</code> \u65F6\uFF0C\u4F1A\u518D\u6B21\u6267\u884C\u4F20\u5165 <code>effect</code> \u4E2D\u7684\u65B9\u6CD5\uFF0C\u6211\u4EEC\u6682\u4E14\u53EB\u5B83 <code>fn</code>\uFF1B</li><li><code>runner</code> \u4F1A\u8FD4\u56DE <code>fn</code> \u6267\u884C\u540E\u7684\u7ED3\u679C\u3002</li></ol></blockquote><h2 id="\u5B9E\u73B0-runner" tabindex="-1"><a class="header-anchor" href="#\u5B9E\u73B0-runner" aria-hidden="true">#</a> \u5B9E\u73B0 <code>runner</code></h2><p>\u4F9D\u636E\u4E0A\u9762\u7684\u63CF\u8FF0\uFF0C\u6211\u4EEC\u5148\u6765\u7F16\u5199 <code>runner</code> \u7684\u6D4B\u8BD5\u7528\u4F8B\uFF1A</p>',11),k=n("div",{class:"language-typescript ext-ts line-numbers-mode"},[n("pre",{class:"language-typescript"},[n("code",null,[n("span",{class:"token comment"},"// src/reactivity/__tests__/effect.spec.ts"),e(`

`),n("span",{class:"token function"},"it"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'renturn a runner when call effect'"),n("span",{class:"token punctuation"},","),e(),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),e(),n("span",{class:"token operator"},"=>"),e(),n("span",{class:"token punctuation"},"{"),e(`
  `),n("span",{class:"token keyword"},"let"),e(" foo "),n("span",{class:"token operator"},"="),e(),n("span",{class:"token number"},"10"),e(`
  `),n("span",{class:"token keyword"},"const"),e(" runner "),n("span",{class:"token operator"},"="),e(),n("span",{class:"token function"},"effect"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),e(),n("span",{class:"token operator"},"=>"),e(),n("span",{class:"token punctuation"},"{"),e(`
    foo`),n("span",{class:"token operator"},"++"),e(`
    `),n("span",{class:"token keyword"},"return"),e(),n("span",{class:"token string"},"'foo'"),e(`
  `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),e(`
  `),n("span",{class:"token comment"},"// \u4F20\u5165 effect \u7684\u65B9\u6CD5 fn \u4F1A\u88AB\u7ACB\u5373\u6267\u884C\u4E00\u6B21\uFF0C\u6240\u4EE5foo = 11"),e(`
  `),n("span",{class:"token function"},"expect"),n("span",{class:"token punctuation"},"("),e("foo"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"toBe"),n("span",{class:"token punctuation"},"("),n("span",{class:"token number"},"11"),n("span",{class:"token punctuation"},")"),e(`
  `),n("span",{class:"token keyword"},"const"),e(" res "),n("span",{class:"token operator"},"="),e(),n("span",{class:"token function"},"runner"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),e(`
  `),n("span",{class:"token comment"},"// \u6267\u884C effect \u8FD4\u56DE\u7684 runner \u51FD\u6570\u540E\uFF0Cfn \u4F1A\u518D\u6B21\u6267\u884C\uFF0C\u6240\u4EE5foo = 12"),e(`
  `),n("span",{class:"token function"},"expect"),n("span",{class:"token punctuation"},"("),e("foo"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"toBe"),n("span",{class:"token punctuation"},"("),n("span",{class:"token number"},"12"),n("span",{class:"token punctuation"},")"),e(`
  `),n("span",{class:"token comment"},"// runner \u4F1A\u8FD4\u56DE fn \u7684\u6267\u884C\u7ED3\u679C\uFF0C\u6240\u4EE5 res = 'foo'"),e(`
  `),n("span",{class:"token function"},"expect"),n("span",{class:"token punctuation"},"("),e("res"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"toBe"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'foo'"),n("span",{class:"token punctuation"},")"),e(`
`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),e(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),f=n("p",null,[e("\u63A5\u4E0B\u6765\uFF0C\u6211\u4EEC\u4FBF\u53EF\u4EE5\u6839\u636E\u6D4B\u8BD5\u7528\u4F8B\u6765\u5BF9 "),n("code",null,"effect"),e(" \u65B9\u6CD5\u8FDB\u884C\u6539\u9020\u3002\u6211\u4EEC\u5148\u6765\u770B\u4E0B\u73B0\u5728\u7684 "),n("code",null,"effect"),e(" \u65B9\u6CD5\u5B9A\u4E49\uFF1A")],-1),m=n("div",{class:"language-typescript ext-ts line-numbers-mode"},[n("pre",{class:"language-typescript"},[n("code",null,[n("span",{class:"token comment"},"// src/reactivity/effect.ts"),e(`

`),n("span",{class:"token keyword"},"export"),e(),n("span",{class:"token keyword"},"function"),e(),n("span",{class:"token function"},"effect"),n("span",{class:"token punctuation"},"("),e("fn"),n("span",{class:"token punctuation"},")"),e(),n("span",{class:"token punctuation"},"{"),e(`
  `),n("span",{class:"token comment"},"// \u5B9E\u4F8B\u5316 ReactiveEffect \u7C7B\uFF0C\u5E76\u5C06\u4F9D\u8D56\u4F20\u5165"),e(`
  `),n("span",{class:"token keyword"},"const"),e(" _effect "),n("span",{class:"token operator"},"="),e(),n("span",{class:"token keyword"},"new"),e(),n("span",{class:"token class-name"},"ReactiveEffect"),n("span",{class:"token punctuation"},"("),e("fn"),n("span",{class:"token punctuation"},")"),e(`
  
  _effect`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"run"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),e(`
`),n("span",{class:"token punctuation"},"}"),e(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),v=o('<p>\u73B0\u5728\uFF0C<code>effect</code> \u9700\u8981\u8FD4\u56DE\u4E00\u4E2A <code>runner</code> \u51FD\u6570\uFF0C\u5E76\u4E14\u5728\u6267\u884C <code>runner</code> \u51FD\u6570\u65F6\u4F1A\u518D\u6B21\u6267\u884C\u4F20\u5165 <code>effect</code> \u7684\u65B9\u6CD5 <code>fn</code>\uFF0C\u800C\u73B0\u5728 <code>fn</code> \u7684\u6267\u884C\u662F\u901A\u8FC7 <code>ReactiveEffect</code> \u66B4\u9732\u51FA\u6765\u7684 <code>run</code> \u65B9\u6CD5\u5B9E\u73B0\u7684\u3002\u6240\u4EE5\uFF0C\u6211\u4EEC\u53EA\u9700\u8981\u5C06 <code>ReactiveEffect</code> \u5B9E\u4F8B\u4E0A\u7684 <code>run</code> \u66B4\u9732\u51FA\u53BB\u5373\u53EF\uFF1A</p><div class="custom-container warning"><p class="custom-container-title">\u6CE8\u610F</p><p>\u7531\u4E8E <code>fn</code> \u88AB\u7ED1\u5B9A\u5728 <code>ReactiveEffect</code> \u7684\u5B9E\u4F8B\u5C5E\u6027 <code>_fn</code> \u4E0A\uFF0C\u4E14 <code>run</code> \u901A\u8FC7 <code>this._fn()</code> \u7684\u65B9\u5F0F\u6765\u8C03\u7528\u5B83\uFF0C\u6240\u4EE5\u5728\u5C06 <code>_effect.run</code> \u66B4\u9732\u51FA\u53BB\u7684\u65F6\u5019\u9700\u8981\u7ED1\u5B9A <code>this</code> \u4F5C\u7528\u57DF\u3002</p></div>',2),b=n("div",{class:"language-typescript ext-ts line-numbers-mode"},[n("pre",{class:"language-typescript"},[n("code",null,[n("span",{class:"token comment"},"// src/reactivity/effect.ts"),e(`

`),n("span",{class:"token keyword"},"export"),e(),n("span",{class:"token keyword"},"function"),e(),n("span",{class:"token function"},"effect"),n("span",{class:"token punctuation"},"("),e("fn"),n("span",{class:"token punctuation"},")"),e(),n("span",{class:"token punctuation"},"{"),e(`
  `),n("span",{class:"token comment"},"// \u5B9E\u4F8B\u5316 ReactiveEffect \u7C7B\uFF0C\u5E76\u5C06\u4F9D\u8D56\u4F20\u5165"),e(`
  `),n("span",{class:"token keyword"},"const"),e(" _effect "),n("span",{class:"token operator"},"="),e(),n("span",{class:"token keyword"},"new"),e(),n("span",{class:"token class-name"},"ReactiveEffect"),n("span",{class:"token punctuation"},"("),e("fn"),n("span",{class:"token punctuation"},")"),e(`
  
  _effect`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"run"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),e(`

  `),n("span",{class:"token keyword"},"return"),e(" _effect"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"run"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"bind"),n("span",{class:"token punctuation"},"("),e("_effect"),n("span",{class:"token punctuation"},")"),e(`
`),n("span",{class:"token punctuation"},"}"),e(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),_=o("<p>\u73B0\u5728\uFF0C<code>effect</code> \u65B9\u6CD5\u5DF2\u7ECF\u53EF\u4EE5\u8FD4\u56DE <code>runner</code> \u51FD\u6570\u4E86\uFF0C\u90A3\u4E48\u6211\u4EEC\u8BE5\u5982\u4F55\u62FF\u5230 <code>fn</code> \u7684\u8FD4\u56DE\u503C\u5462\uFF1F\u5176\u5B9E\u5F88\u7B80\u5355\uFF0C\u53EA\u9700\u8981\u6539\u9020\u4E0B <code>ReactiveEffect</code> \u4E2D\u7684 <code>run</code> \u65B9\u6CD5\uFF0C\u5C06 <code>_fn</code> \u7684\u6267\u884C\u7ED3\u679C\u8FD4\u56DE\u5373\u53EF\uFF1A</p>",1),h=n("div",{class:"language-typescript ext-ts line-numbers-mode"},[n("pre",{class:"language-typescript"},[n("code",null,[n("span",{class:"token comment"},"// src/reactivity/effect.ts"),e(`

`),n("span",{class:"token keyword"},"class"),e(),n("span",{class:"token class-name"},"ReactiveEffect"),e(),n("span",{class:"token punctuation"},"{"),e(`
  `),n("span",{class:"token keyword"},"private"),e(" _fn"),n("span",{class:"token operator"},":"),e(),n("span",{class:"token builtin"},"any"),e(`
  
  `),n("span",{class:"token function"},"constructor"),n("span",{class:"token punctuation"},"("),e("fn"),n("span",{class:"token punctuation"},")"),e(),n("span",{class:"token punctuation"},"{"),e(`
    `),n("span",{class:"token keyword"},"this"),n("span",{class:"token punctuation"},"."),e("_fn "),n("span",{class:"token operator"},"="),e(` fn
  `),n("span",{class:"token punctuation"},"}"),e(`

  `),n("span",{class:"token function"},"run"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),e(),n("span",{class:"token punctuation"},"{"),e(`
    activeEffect `),n("span",{class:"token operator"},"="),e(),n("span",{class:"token keyword"},"this"),e(`
    `),n("span",{class:"token keyword"},"return"),e(),n("span",{class:"token keyword"},"this"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"_fn"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),e(`
  `),n("span",{class:"token punctuation"},"}"),e(`
`),n("span",{class:"token punctuation"},"}"),e(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),y=n("p",null,[e("\u81F3\u6B64\uFF0C"),n("code",null,"runner"),e(" \u529F\u80FD\u5C31\u5B9E\u73B0\u5B8C\u6210\u5566~")],-1);function w(g,x){const t=l("CodeGroupItem"),c=l("CodeGroup");return i(),p("div",null,[d,s(c,null,{default:a(()=>[s(t,{title:"effect.spec.ts"},{default:a(()=>[k]),_:1})]),_:1}),f,s(c,null,{default:a(()=>[s(t,{title:"effect.ts"},{default:a(()=>[m]),_:1})]),_:1}),v,s(c,null,{default:a(()=>[s(t,{title:"effect.ts"},{default:a(()=>[b]),_:1})]),_:1}),_,s(c,null,{default:a(()=>[s(t,{title:"effect.ts"},{default:a(()=>[h]),_:1})]),_:1}),y])}var R=u(r,[["render",w],["__file","runner.html.vue"]]);export{R as default};
